## 深入理解Java虚拟机

> 参考《深入理解Java虚拟机，JVM高级特性与最佳实践》第二版

本笔记主要针对JDK1.7版本

### 一、Java技术体系

Java技术体系包括如下部分：

- Java程序设计语言
- 各种硬件平台上的Java虚拟机
- Class文件格式
- Java API类库
- 来自商业机构和开源社区的第三方Java类库

JDK（Java Development Kit），Java程序开发的最小环境：

- Java程序设计语言
- Java虚拟机
- Java API类库

JRE（Java Runtime Environment），支持Java程序运行的标准环境：

- Java API类库中的Java SE API子集
- Java虚拟机

### 二、自动内存管理机制

#### 2.1、运行时数据区域

​	图片：Java虚拟机运行时数据区域

##### 2.1.1、程序计数器（Program Counter Register）

​        程序计数器是一块较小的内存空间，它可以看作是当前线程所执行的字节码的行号指示器。字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常恢复等基础功能都需要依赖这个计数器来完成。

​	由于Java虚拟机的多线程是通过线程轮流切换并分配处理器执行时间的方式来实现的，在任何一个确定的时刻，一个处理器都只会执行一条线程中的指令。因此，为了线程切换后能恢复到正确的执行位置，**每条线程都需要有一个独立的程序计数器**，各条线程之间的计数器互不影响，独立存储，我们这类内存区域为“线程私有”的内存。

​	如果线程正在执行一个Java方法，这个计数器记录的是正在执行的虚拟机字节码指令的地址；如果正在执行的是Native方法，这个计数器的值则为空（Undefined）。

​	此内存区域是唯一一个在Java虚拟机规范中**没有规定任何OutOfMemoryError情况的区域**。



